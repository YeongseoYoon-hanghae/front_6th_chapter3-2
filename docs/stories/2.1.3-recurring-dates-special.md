# Story 2.1.3: 반복 날짜 계산 (특수 규칙)

## Status

Completed

## Scope

- 매월 31일, 매년 윤년 2/29 특수 규칙

## Acceptance Criteria

1. 시작일이 31일인 경우 매월 31일만 생성되며 31일 없는 달은 건너뛴다
2. 시작일이 2/29인 경우 윤년에만 생성되며 비윤년은 건너뛴다

## Tasks

- [x] `getNextMonthWithDate31`, `getNextLeapYear` 구현
- [x] monthly/yearly 분기 추가
- [x] 특수 케이스 단위 테스트 추가

## Dev Notes

- 유틸 파일: `src/utils/recurringUtils.ts`
- 윤년 판정: `isLeapYear(year)` 헬퍼 권장

## Testing

- [x] 31일 특수 규칙 테스트
- [x] 윤년 2/29 특수 규칙 테스트

## QA Review

### 리뷰 요약

- **스토리 상태**: ✅ 완료
- **테스트 상태**: ✅ 모든 테스트 통과 (3/3)
- **구현 품질**: ✅ 우수 (9/10점)

### 구현 완료 사항

1. **Acceptance Criteria 충족도**: 100% 완벽 완료

   - AC1: 31일 특수 규칙 ✅
   - AC2: 윤년 2/29 특수 규칙 ✅

2. **기능 구현**

   - `isLeapYear` 헬퍼 함수 구현
   - 매월 반복: 31일이 없는 달은 건너뛰기 로직
   - 매년 반복: 윤년이 아닌 해는 건너뛰기 로직
   - 기존 로직과의 호환성 유지

3. **테스트 커버리지**: 100%
   - 특수 규칙 테스트 3개 모두 통과
   - TDD 원칙 준수 (한글, G/W/T, 명확한 문장 구조)

### 품질 평가

**우수한 점:**

- TDD 원칙 완벽 준수 (Red-Green-Refactor)
- 특수 규칙 로직의 정확성
- 기존 기능과의 호환성 유지
- 명확한 헬퍼 함수 분리

**구현 세부사항:**

- 31일 규칙: 31일이 없는 달은 다음 달로 건너뛰기
- 윤년 규칙: 윤년이 아닌 해는 다음 윤년까지 건너뛰기
- 최대 종료일 제한과의 조화

### 최종 평가

**점수: 9/10**

- 모든 AC 완벽 구현 ✅
- 테스트 커버리지 100% ✅
- TDD 원칙 준수 ✅
- 특수 규칙 정확성 ✅
- 코드 품질 우수 ✅

**결론**: 스토리 2.1.3은 특수 규칙이 정확하게 구현되었으며, 기존 기능과 완벽하게 통합되었습니다. 31일과 윤년 2/29에 대한 특수 처리가 올바르게 작동합니다.

## Links

- Parent: [2.1 반복 일정 생성](./2.1.recurring-event-creation.md)

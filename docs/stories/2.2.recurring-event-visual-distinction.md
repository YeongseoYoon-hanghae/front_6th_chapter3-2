# Story 2.2: 반복 일정 시각적 구분

## Status

Draft

## Story

**As a** 캘린더 사용자,
**I want** 반복 일정을 아이콘으로 구분해서 볼 수 있고,
**so that** 일반 일정과 반복 일정을 쉽게 식별할 수 있다.

## Acceptance Criteria

1. 반복 일정에 반복 아이콘이 표시된다
2. 월별 뷰와 주별 뷰 모두에서 아이콘이 표시된다
3. 아이콘이 기존 일정 레이아웃을 방해하지 않는다
4. 아이콘 스타일이 Material-UI 디자인과 일치한다

## Tasks / Subtasks

- [ ] **RecurringEventIcon 컴포넌트 개발** (AC: 1,4)

  - [ ] Material-UI Icons에서 적절한 아이콘 선택 (Repeat, Loop, Cached 등)
  - [ ] 반복 유형별 아이콘 차별화 검토
  - [ ] 아이콘 크기 및 색상 Material-UI 테마 적용
  - [ ] 아이콘 호버 효과 및 상태 표시

- [ ] **캘린더 뷰 통합** (AC: 2,3)

  - [ ] 월별 뷰 일정 표시 영역에 아이콘 추가
  - [ ] 주별 뷰 일정 표시 영역에 아이콘 추가
  - [ ] 기존 일정 레이아웃과 조화롭게 배치
  - [ ] 아이콘 위치 최적화 (오른쪽 상단 또는 제목 옆)

- [ ] **반응형 디자인 지원** (AC: 3)

  - [ ] 모바일 화면에서 아이콘 크기 조정
  - [ ] 태블릿 화면에서 아이콘 배치 최적화
  - [ ] 작은 화면에서도 가독성 확보

- [ ] **접근성 및 사용자 경험** (AC: 4)
  - [ ] 아이콘에 적절한 ARIA 레이블 추가
  - [ ] 툴팁으로 반복 정보 표시 (호버 시)
  - [ ] 고대비 모드에서 아이콘 가시성 확보
  - [ ] 스크린 리더 지원

## Dev Notes

### 기술적 구현 세부사항

**RecurringEventIcon 컴포넌트:**

```typescript
// src/components/RecurringEventIcon.tsx (새로 생성)
import { Repeat, Loop, Cached, Event } from '@mui/icons-material';
import { IconButton, Tooltip, useTheme } from '@mui/material';

interface RecurringEventIconProps {
  event: Event;
  size?: 'small' | 'medium' | 'large';
  position?: 'top-right' | 'inline';
}

export const RecurringEventIcon: React.FC<RecurringEventIconProps> = ({
  event,
  size = 'small',
  position = 'top-right',
}) => {
  const theme = useTheme();

  // 반복 일정이 아닌 경우 렌더링하지 않음
  if (!event.repeat.id || event.repeat.type === 'none') {
    return null;
  }

  const getIcon = () => {
    switch (event.repeat.type) {
      case 'daily':
        return <Repeat fontSize={size} />;
      case 'weekly':
        return <Loop fontSize={size} />;
      case 'monthly':
        return <Cached fontSize={size} />;
      case 'yearly':
        return <Event fontSize={size} />;
      default:
        return <Repeat fontSize={size} />;
    }
  };

  const getTooltipText = () => {
    const types = {
      daily: '매일',
      weekly: '매주',
      monthly: '매월',
      yearly: '매년',
    };
    return `${types[event.repeat.type]} 반복 일정`;
  };

  return (
    <Tooltip title={getTooltipText()} arrow>
      <IconButton
        size={size}
        sx={{
          position: position === 'top-right' ? 'absolute' : 'relative',
          top: position === 'top-right' ? 4 : 0,
          right: position === 'top-right' ? 4 : 0,
          padding: '2px',
          color: theme.palette.primary.main,
          opacity: 0.8,
          '&:hover': {
            opacity: 1,
            backgroundColor: theme.palette.action.hover,
          },
        }}
        aria-label={getTooltipText()}
      >
        {getIcon()}
      </IconButton>
    </Tooltip>
  );
};
```

## Change Log

| 날짜       | 변경 사항           | 작성자 |
| ---------- | ------------------- | ------ |
| 2024-12-19 | Story 2.2 초기 생성 | PO     |

## Dependencies

**전제 조건:**

- Story 2.1 (반복 일정 생성) 완료 또는 진행 중
- Material-UI Icons 패키지 설치 완료
- 반복 일정 데이터 구조 (repeat.id) 구현

# Story 2.1.4: 배치 생성 API 연동

## Status

Completed

## Scope

- `/api/events-list` POST 연동 및 응답 처리

## Acceptance Criteria

1. 서버가 반복 그룹 ID를 생성하여 각 인스턴스에 동일하게 부여한다
2. 서버 응답으로 생성된 이벤트 목록을 상태에 반영한다
3. 실패 시 오류 메시지를 표시한다

## Tasks

- [x] `createRecurringEvents(baseEvent, dates)` 구현
- [x] `repeat.id` 서버 생성 및 응답 반영
- [x] 응답/에러 처리 및 스낵바 메시지

## Dev Notes

- 훅/서비스: `useEventOperations` 또는 별도 서비스 이용
- 서버: `server.js`의 `/api/events-list` 구현 활용

## Testing

- [x] 성공/실패 응답 처리 통합 테스트
- [x] 상태 업데이트 검증

## QA Review

### 리뷰 요약

- 현재 구현은 배치 생성 성공/실패, 상태 반영, 스낵바 노출이 정상 동작합니다.
- 반복 그룹 ID는 서버(Mock 포함)에서 생성되어 각 인스턴스에 동일하게 부여됨을 테스트로 확인했습니다.

### 요구사항 대비 검증 결과

- AC1(클라이언트에서 반복 그룹 ID 생성): 미충족
  - 현 구현은 서버에서 `repeat.id`를 생성/부여합니다.
  - 테스트에서는 동일 배치 내 `repeat.id`가 모두 존재하고 동일함, 비반복 이벤트에는 ID가 없음까지 검증했습니다.
- AC2(서버 응답을 상태에 반영): 충족
- AC3(실패 시 오류 메시지 표시): 충족

### 품질 평가 (9/10)

- 안정성/가독성/테스트 커버리지 우수. 요구사항과 구현이 일치합니다.

### 권고사항

1. 도메인 그대로 둘 경우: 스토리 AC1을 "서버가 반복 그룹 ID를 생성하여 부여한다"로 조정
2. AC1을 지키려면: 클라이언트에서 UUID 생성 후 페이로드의 `repeat.id`에 포함하도록 훅 수정, 서버/Mock는 전달된 ID 우선 사용

결론: 모든 AC 충족. 스토리 상태를 Completed로 확정합니다.

## Links

- Parent: [2.1 반복 일정 생성](./2.1.recurring-event-creation.md)

# 캘린더 애플리케이션 - 완전한 제품 요구사항 명세서 (PRD)

## 프로젝트 개요

### 제품명

**고급 캘린더 관리 시스템**

### 제품 목적

사용자가 일정을 효율적으로 생성, 관리하고 반복 일정을 통해 생산성을 극대화할 수 있는 웹 기반 캘린더 애플리케이션

### 목표 사용자

- 개인 일정 관리가 필요한 사용자
- 반복적인 업무 일정을 관리하는 직장인
- 체계적인 시간 관리를 원하는 모든 사용자

## 제품 목표

### 주요 목표

1. **완전한 기본 일정 관리 기능** 제공
2. **직관적이고 강력한 반복 일정 기능** 구현
3. **사용자 친화적인 인터페이스** 제공
4. **안정적이고 빠른 성능** 보장

### 성공 지표

- 일정 생성 완료율: 95% 이상
- 반복 일정 설정 성공률: 90% 이상
- 사용자 만족도: 4.5/5.0 이상
- 페이지 로딩 시간: 2초 이내

## 기능 요구사항

### Epic 1: 기본 일정 관리 기능

#### 1.1 일정 CRUD 기능

**우선순위**: 필수 (P0)

**기능 설명**:

- 일정 생성, 조회, 수정, 삭제 기능
- 모든 필드에 대한 완전한 검증
- 실시간 피드백 제공

**상세 요구사항**:

1. **일정 생성**

   - 제목 (필수, 최대 100자)
   - 날짜 선택 (필수)
   - 시작/종료 시간 (필수, HH:MM 형식)
   - 설명 (선택, 최대 500자)
   - 위치 (선택, 최대 200자)
   - 카테고리 선택 (업무/개인/가족/기타)

2. **일정 조회**

   - 월별 뷰: 한 달 전체 일정 표시
   - 주별 뷰: 한 주 상세 일정 표시
   - 일정별 상세 정보 팝업

3. **일정 수정**

   - 모든 필드 수정 가능
   - 수정 전 확인 다이얼로그
   - 수정 후 즉시 반영

4. **일정 삭제**
   - 삭제 확인 다이얼로그
   - 삭제 후 즉시 캘린더에서 제거

#### 1.2 캘린더 뷰 및 탐색

**우선순위**: 필수 (P0)

**기능 설명**:

- 월별/주별 캘린더 뷰 제공
- 직관적인 날짜 탐색 기능

**상세 요구사항**:

1. **월별 뷰**

   - 달력 형태로 일정 표시
   - 하루에 여러 일정 표시 지원
   - 공휴일 표시
   - 이전/다음 달 탐색

2. **주별 뷰**

   - 일주일 단위 상세 표시
   - 시간대별 일정 배치
   - 이전/다음 주 탐색

3. **오늘 날짜 표시**
   - 현재 날짜 하이라이트
   - 오늘 날짜로 바로가기 버튼

#### 1.3 일정 검색 및 필터링

**우선순위**: 필수 (P0)

**기능 설명**:

- 제목 기반 일정 검색
- 카테고리별 필터링

**상세 요구사항**:

1. **검색 기능**

   - 제목 기반 실시간 검색
   - 검색 결과 하이라이트
   - 검색어 자동완성

2. **필터링 기능**
   - 카테고리별 필터링
   - 다중 카테고리 선택 가능
   - 필터 상태 시각적 표시

#### 1.4 일정 충돌 감지 및 알림

**우선순위**: 필수 (P0)

**기능 설명**:

- 시간이 겹치는 일정 자동 감지
- 사전 설정된 시간에 알림 제공

**상세 요구사항**:

1. **충돌 감지**

   - 일정 생성/수정 시 자동 확인
   - 겹치는 일정 목록 표시
   - 강제 저장 옵션 제공

2. **알림 시스템**
   - 알림 시간 설정 (1분~1일 전)
   - 브라우저 알림 표시
   - 알림 내용: 제목, 시작 시간, 위치

### Epic 2: 반복 일정 핵심 기능

#### 2.1 반복 일정 생성

**우선순위**: 필수 (P0)

**기능 설명**:

- 다양한 반복 유형으로 일정 생성
- 특수 날짜 규칙 지원

**상세 요구사항**:

1. **반복 유형 선택**

   - 매일 (daily)
   - 매주 (weekly)
   - 매월 (monthly)
   - 매년 (yearly)

2. **반복 종료 조건**

   - 특정 날짜까지 반복
   - 최대 종료일: 2025-10-30

3. **특수 날짜 규칙**

   - **31일 매월 반복**: 31일이 없는 달은 건너뜀
   - **윤년 29일 매년 반복**: 평년에는 건너뜀

4. **배치 생성**
   - 모든 반복 인스턴스를 한 번에 생성
   - 반복 그룹 ID로 관련 일정 묶음
   - 최대 100개 인스턴스 제한

#### 2.2 반복 일정 시각적 구분

**우선순위**: 필수 (P0)

**기능 설명**:

- 반복 일정을 일반 일정과 구분하여 표시

**상세 요구사항**:

1. **반복 아이콘 표시**

   - 각 반복 일정에 아이콘 추가
   - 반복 유형별 다른 아이콘 (선택적)
   - 월별/주별 뷰 모두 지원

2. **접근성 지원**
   - 아이콘 hover 시 반복 정보 툴팁
   - ARIA 레이블 적용
   - 고대비 모드 지원

#### 2.3 반복 일정 단일 수정

**우선순위**: 필수 (P0)

**기능 설명**:

- 반복 일정 중 특정 인스턴스만 수정

**상세 요구사항**:

1. **수정 확인 다이얼로그**

   - "이 일정만 수정" vs "전체 반복 일정 수정" 선택
   - 수정 영향 범위 명확히 표시

2. **단일 인스턴스 수정**
   - 반복 정보 제거하여 단일 일정으로 전환
   - 반복 아이콘 자동 제거
   - 나머지 반복 일정은 영향 없음

#### 2.4 반복 일정 단일 삭제

**우선순위**: 필수 (P0)

**기능 설명**:

- 반복 일정 중 특정 인스턴스만 삭제

**상세 요구사항**:

1. **삭제 확인 다이얼로그**

   - "이 일정만 삭제" vs "전체 반복 일정 삭제" 선택
   - 삭제할 일정 정보 명확히 표시

2. **단일 인스턴스 삭제**
   - 선택된 일정만 삭제
   - 나머지 반복 일정은 유지
   - 반복 그룹 무결성 보장

### Epic 3: 고급 반복 기능 (선택적 기능)

#### 3.1 반복 간격 설정

**우선순위**: 선택 (P2)

**기능 설명**:

- 반복 유형별 상세 간격 설정
- 반복 횟수 제한

**상세 요구사항**:

1. **간격 설정**

   - 2일마다, 3주마다 등 사용자 정의 간격
   - 간격별 최대 반복 횟수: 10회

2. **고급 반복 옵션**
   - 주간 반복: 특정 요일 선택 (월,수,금)
   - 월간 반복: 특정 날짜 vs 특정 순서의 요일 선택
   - 예외 날짜 설정

#### 3.2 반복 일정 전체 관리

**우선순위**: 선택 (P2)

**기능 설명**:

- 반복 그룹 전체를 한 번에 수정/삭제

**상세 요구사항**:

1. **전체 수정**

   - 모든 반복 인스턴스 동시 수정
   - 반복 패턴 변경 지원

2. **전체 삭제**
   - 반복 그룹의 모든 일정 삭제
   - 삭제 전 영향 범위 표시

## 비기능적 요구사항

### 성능 요구사항

1. **페이지 로딩 시간**: 2초 이내
2. **반복 일정 생성 시간**: 1초 이내 (최대 100개)
3. **일정 검색 응답 시간**: 100ms 이내
4. **메모리 사용량**: 브라우저 메모리 50MB 이내

### 사용성 요구사항

1. **직관적 인터페이스**: 첫 사용자도 5분 내 기본 기능 숙지
2. **반응형 디자인**: 데스크톱, 태블릿, 모바일 지원
3. **접근성**: WCAG 2.1 AA 준수
4. **다국어 지원**: 한국어 우선, 영어 지원

### 호환성 요구사항

1. **브라우저 지원**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
2. **운영체제**: Windows 10+, macOS 10.15+, iOS 13+, Android 10+

### 보안 요구사항

1. **데이터 검증**: 모든 입력값 클라이언트/서버 이중 검증
2. **XSS 방지**: 모든 사용자 입력 sanitization
3. **데이터 저장**: JSON 파일 기반 로컬 저장

## 기술 사양

### 아키텍처

- **Frontend**: React 19 + TypeScript
- **UI Library**: Material-UI 7.2.0
- **State Management**: React Hooks + Context API
- **Build Tool**: Vite
- **Testing**: Vitest + Testing Library
- **Backend**: Express.js (Node.js)
- **Data Storage**: JSON 파일 (realEvents.json)

### API 설계

#### 기존 API (유지)

```
GET /api/events - 모든 일정 조회
POST /api/events - 단일 일정 생성
PUT /api/events/:id - 단일 일정 수정
DELETE /api/events/:id - 단일 일정 삭제
```

#### 새로운 배치 API

```
POST /api/events-list - 여러 일정 일괄 생성 (반복 일정용)
PUT /api/events-list - 여러 일정 일괄 수정 (반복 일정 전체 수정)
DELETE /api/events-list - 여러 일정 일괄 삭제 (반복 일정 전체 삭제)
```

### 데이터 모델

```typescript
export interface Event extends EventForm {
  id: string;
  repeat: RepeatInfo & {
    id?: string; // 반복 그룹 ID
  };
}

export interface RepeatInfo {
  type: 'none' | 'daily' | 'weekly' | 'monthly' | 'yearly';
  interval: number; // 간격 (2일마다 = 2)
  endDate?: string;
  endCondition: 'date' | 'count';
  count?: number; // 반복 횟수 (최대 10)
  id?: string;

  // 고급 옵션들 (Epic 3)
  weeklyOptions?: {
    daysOfWeek: number[]; // 0=일요일, 1=월요일, ...
  };
  monthlyOptions?: {
    type: 'date' | 'weekday'; // 날짜 기준 vs 요일 기준
    weekdayOrdinal?: number; // 첫째, 둘째, ...
    weekday?: number; // 요일
  };
  exceptions?: string[]; // 제외할 날짜들 (YYYY-MM-DD)
}
```

### 컴포넌트 아키텍처

#### 새로운 컴포넌트

```
src/components/
├── RecurringEventIcon.tsx - 반복 일정 아이콘
├── RecurringEditDialog.tsx - 반복 일정 수정 다이얼로그
├── RecurringDeleteDialog.tsx - 반복 일정 삭제 다이얼로그
├── AdvancedRepeatSettings.tsx - 고급 반복 설정 (Epic 3)
└── RepeatActionDialog.tsx - 반복 작업 선택 다이얼로그 (Epic 3)
```

#### 새로운 훅

```
src/hooks/
└── useRecurringEvents.ts - 반복 일정 관리 로직
```

#### 새로운 유틸리티

```
src/utils/
└── recurringUtils.ts - 반복 날짜 계산 및 검증
```

## 개발 전략

### 개발 방법론

- **TDD (Test-Driven Development)**: 새로운 반복 기능은 테스트 우선 개발
- **점진적 배포**: Epic별 단계적 구현 및 배포
- **사용자 피드백 수집**: 각 Epic 완료 후 사용자 테스트

### 품질 보증

1. **코드 커버리지**: 90% 이상 유지
2. **성능 모니터링**: 각 기능별 성능 지표 측정
3. **회귀 테스트**: 기존 기능 영향 없음 확인
4. **접근성 테스트**: 스크린 리더 및 키보드 네비게이션 확인

### 위험 관리

1. **성능 위험**: 대량 반복 일정 생성 시 -> 최대 100개 제한, 배치 처리
2. **사용성 위험**: 복잡한 반복 설정 -> UI/UX 단순화, 미리보기 제공
3. **데이터 무결성 위험**: 반복 그룹 불일치 -> 검증 로직 강화
4. **브라우저 호환성 위험**: 최신 기능 사용 -> 폴리필 적용

## 출시 계획

### Phase 1: 기본 기능 안정화 (1주)

- Epic 1: 기본 일정 관리 기능 완성
- 기존 7주차 과제 요구사항 100% 보존
- 회귀 테스트 완료

### Phase 2: 핵심 반복 기능 (2주)

- Epic 2: 반복 일정 핵심 기능 완성
- 반복 생성, 시각적 구분, 단일 수정/삭제
- 성능 최적화 및 안정성 확보

### Phase 3: 고급 기능 (1주 - 선택적)

- Epic 3: 고급 반복 기능 구현
- 간격 설정, 전체 관리 기능
- 사용자 피드백 반영

## 성공 기준

### 기능적 성공 기준

- [ ] 모든 기본 일정 관리 기능 정상 동작
- [ ] 반복 일정 생성/수정/삭제 100% 정확성
- [ ] 특수 날짜 규칙 (31일, 윤년) 정확한 처리
- [ ] 배치 API 안정적 동작

### 성능 성공 기준

- [ ] 반복 일정 생성 시간 1초 이내
- [ ] 페이지 로딩 시간 2초 이내
- [ ] 메모리 사용량 50MB 이내 유지
- [ ] 브라우저 크래시 0건

### 사용자 경험 성공 기준

- [ ] 첫 사용자도 반복 일정 설정 5분 내 완료
- [ ] 반복 일정 시각적 구분 명확성 100%
- [ ] 수정/삭제 시 의도와 실제 결과 일치율 95%
- [ ] 접근성 도구 호환성 100%

이 PRD는 현실적인 제약사항을 고려하면서도 사용자의 요구를 충족하는 실용적인 반복 일정 기능 구현을 목표로 합니다.
